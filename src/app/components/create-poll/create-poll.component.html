<section *ngIf="error$ | async as error">
  <h1>{{ error }}</h1>
</section>
<section>
  <input [(ngModel)]="question" />
  <h2>{{ question }}</h2>
</section>
<form [formGroup]="votesForm" (ngSubmit)="onSubmit()">
  <input
    type="text"
    formControlName="title"
    placeholder="Add your vote"
    required
    [(ngModel)]="inputFieldValue"
  />
  <div *ngIf="votes$ | async as votes">
    <button *ngIf="!editing" [disabled]="votes.length >= 10" type="submit">
      Add Vote
    </button>
    <button (click)="editVote(inputFieldValue)" *ngIf="editing">Update</button>
    <button (click)="cancelEdit()" *ngIf="editing">Cancel</button>
  </div>
</form>

<section *ngIf="votes$ | async as votes">
  <ul *ngFor="let vote of votes">
    <li>
      <button (click)="deleteVote(vote)">X</button>
      <button (click)="editToDo(vote)">edit</button>
      <span>{{ vote.title }}</span>
    </li>
    <ol *ngIf="votes.length > 0">
      <input type="radio" value="{{ vote.title }}" (click)="onVote(vote)" />
      <label for="{{ vote.title }}">{{ vote.title }}</label>
    </ol>
  </ul>
  <div style="display: block; height: 300px">
    <canvas
      baseChart
      [datasets]="barChartData"
      [labels]="barChartLabels"
      [options]="barChartOptions"
      [legend]="barChartLegend"
      [chartType]="barChartType"
    >
    </canvas>
  </div>
</section>
